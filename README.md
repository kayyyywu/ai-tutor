# PDF Chatbot - AIé©±åŠ¨çš„PDFæ–‡æ¡£èŠå¤©ç³»ç»Ÿ

ä¸€ä¸ªåŸºäºNext.jsçš„æ™ºèƒ½PDFæ–‡æ¡£èŠå¤©ç³»ç»Ÿï¼Œæ”¯æŒPDFä¸Šä¼ ã€æ–‡æœ¬æå–ã€è¯­ä¹‰æœç´¢å’ŒAIå¯¹è¯åŠŸèƒ½ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

- **PDFæ–‡æ¡£ç®¡ç†**: ä¸Šä¼ ã€å­˜å‚¨å’Œç®¡ç†PDFæ–‡ä»¶
- **æ™ºèƒ½æ–‡æœ¬æå–**: è‡ªåŠ¨æå–PDFæ–‡æœ¬å†…å®¹
- **è¯­ä¹‰æœç´¢**: åŸºäºAIçš„PDFå†…å®¹æœç´¢
- **AIå¯¹è¯**: ä¸PDFå†…å®¹è¿›è¡Œæ™ºèƒ½å¯¹è¯
- **ç”¨æˆ·è®¤è¯**: åŸºäºNextAuth.jsçš„ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- **å“åº”å¼è®¾è®¡**: æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡

## ğŸ“ é¡¹ç›®ç»“æ„

```
chatbot-main/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ (auth)/                   # è®¤è¯ç›¸å…³è·¯ç”±ç»„
â”‚   â”‚   â”œâ”€â”€ auth.ts              # NextAuthé…ç½®
â”‚   â”‚   â”œâ”€â”€ login/page.tsx       # ç™»å½•é¡µé¢
â”‚   â”‚   â””â”€â”€ register/page.tsx    # æ³¨å†Œé¡µé¢
â”‚   â”œâ”€â”€ (chat)/                   # èŠå¤©ç›¸å…³è·¯ç”±ç»„
â”‚   â”‚   â”œâ”€â”€ page.tsx             # ä¸»èŠå¤©é¡µé¢
â”‚   â”‚   â”œâ”€â”€ chat/[id]/page.tsx   # èŠå¤©è¯¦æƒ…é¡µé¢
â”‚   â”‚   â””â”€â”€ api/                 # APIè·¯ç”±
â”‚   â”‚       â”œâ”€â”€ chat/enhanced/   # å¢å¼ºèŠå¤©API
â”‚   â”‚       â””â”€â”€ pdf/             # PDFç›¸å…³API
â”‚   â””â”€â”€ globals.css              # å…¨å±€æ ·å¼
â”œâ”€â”€ components/                   # Reactç»„ä»¶
â”‚   â”œâ”€â”€ custom/                  # è‡ªå®šä¹‰ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ split-chat.tsx      # ä¸»èŠå¤©ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ message.tsx         # æ¶ˆæ¯ç»„ä»¶
â”‚   â”‚   â””â”€â”€ multimodal-input.tsx # å¤šæ¨¡æ€è¾“å…¥ç»„ä»¶
â”‚   â”œâ”€â”€ pdf/                    # PDFç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ simple-ai-pdf-viewer.tsx # PDFæŸ¥çœ‹å™¨
â”‚   â”‚   â”œâ”€â”€ pdf-upload.tsx      # PDFä¸Šä¼ ç»„ä»¶
â”‚   â”‚   â””â”€â”€ pdf-list.tsx        # PDFåˆ—è¡¨ç»„ä»¶
â”‚   â””â”€â”€ ui/                     # UIåŸºç¡€ç»„ä»¶
â”œâ”€â”€ db/                         # æ•°æ®åº“ç›¸å…³
â”‚   â”œâ”€â”€ prisma-queries.ts       # PrismaæŸ¥è¯¢å‡½æ•°
â”‚   â””â”€â”€ context-manager.ts      # ä¸Šä¸‹æ–‡ç®¡ç†
â”œâ”€â”€ lib/                        # å·¥å…·åº“
â”‚   â”œâ”€â”€ prisma.ts              # Prismaå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ pdf-search.ts          # PDFæœç´¢åŠŸèƒ½
â”‚   â””â”€â”€ utils.ts               # é€šç”¨å·¥å…·å‡½æ•°
â””â”€â”€ prisma/                     # æ•°æ®åº“æ¨¡å¼
    â””â”€â”€ schema.prisma          # Prismaæ¨¡å¼å®šä¹‰
```

## ğŸ“– ä»£ç é˜…è¯»é¡ºåº

### 1. é¡¹ç›®é…ç½®å’Œå…¥å£ (å¼€å§‹é˜…è¯»)
```
ğŸ“„ package.json                 # é¡¹ç›®ä¾èµ–å’Œè„šæœ¬
ğŸ“„ next.config.mjs             # Next.jsé…ç½®
ğŸ“„ tailwind.config.ts          # Tailwind CSSé…ç½®
ğŸ“„ prisma/schema.prisma        # æ•°æ®åº“æ¨¡å¼å®šä¹‰
```

### 2. è®¤è¯ç³»ç»Ÿ (ç”¨æˆ·ç®¡ç†)
```
ğŸ“„ app/(auth)/auth.ts          # NextAuth.jsé…ç½®
ğŸ“„ app/(auth)/auth.config.ts   # è®¤è¯é…ç½®
ğŸ“„ app/(auth)/login/page.tsx   # ç™»å½•é¡µé¢
ğŸ“„ app/(auth)/register/page.tsx # æ³¨å†Œé¡µé¢
```

### 3. æ•°æ®åº“å±‚ (æ•°æ®ç®¡ç†)
```
ğŸ“„ lib/prisma.ts               # Prismaå®¢æˆ·ç«¯é…ç½®
ğŸ“„ db/prisma-queries.ts        # æ•°æ®åº“æŸ¥è¯¢å‡½æ•°
ğŸ“„ db/context-manager.ts       # å¯¹è¯ä¸Šä¸‹æ–‡ç®¡ç†
```

### 4. æ ¸å¿ƒå·¥å…·åº“ (åŸºç¡€åŠŸèƒ½)
```
ğŸ“„ lib/utils.ts                # é€šç”¨å·¥å…·å‡½æ•°
ğŸ“„ lib/pdf-search.ts           # PDFæœç´¢åŠŸèƒ½
ğŸ“„ ai/index.ts                 # AIæ¨¡å‹é…ç½®
```

### 5. UIåŸºç¡€ç»„ä»¶ (ç•Œé¢åŸºç¡€)
```
ğŸ“„ components/ui/              # åŸºç¡€UIç»„ä»¶
â”‚   â”œâ”€â”€ button.tsx
â”‚   â”œâ”€â”€ input.tsx
â”‚   â”œâ”€â”€ textarea.tsx
â”‚   â””â”€â”€ ...
```

### 6. PDFç›¸å…³ç»„ä»¶ (PDFåŠŸèƒ½)
```
ğŸ“„ components/pdf/
â”‚   â”œâ”€â”€ simple-ai-pdf-viewer.tsx # PDFæŸ¥çœ‹å™¨ (æ ¸å¿ƒ)
â”‚   â”œâ”€â”€ pdf-upload.tsx          # PDFä¸Šä¼ ç»„ä»¶
â”‚   â””â”€â”€ pdf-list.tsx            # PDFåˆ—è¡¨ç»„ä»¶
```

### 7. èŠå¤©æ ¸å¿ƒç»„ä»¶ (ä¸»è¦åŠŸèƒ½)
```
ğŸ“„ components/custom/
â”‚   â”œâ”€â”€ split-chat.tsx          # ä¸»èŠå¤©ç•Œé¢ (æ ¸å¿ƒ)
â”‚   â”œâ”€â”€ message.tsx             # æ¶ˆæ¯æ˜¾ç¤ºç»„ä»¶
â”‚   â”œâ”€â”€ multimodal-input.tsx    # è¾“å…¥ç»„ä»¶
â”‚   â”œâ”€â”€ markdown.tsx            # Markdownæ¸²æŸ“
â”‚   â””â”€â”€ icons.tsx               # å›¾æ ‡ç»„ä»¶
```

### 8. APIè·¯ç”± (åç«¯é€»è¾‘)
```
ğŸ“„ app/(chat)/api/
â”‚   â”œâ”€â”€ chat/enhanced/route.ts  # å¢å¼ºèŠå¤©API (æ ¸å¿ƒ)
â”‚   â”œâ”€â”€ pdf/upload/route.ts     # PDFä¸Šä¼ API
â”‚   â”œâ”€â”€ pdf/extract-text/route.ts # PDFæ–‡æœ¬æå–API
â”‚   â”œâ”€â”€ pdf/search/route.ts     # PDFæœç´¢API
â”‚   â””â”€â”€ pdf/associate/route.ts  # PDFå…³è”API
```

### 9. é¡µé¢ç»„ä»¶ (ç”¨æˆ·ç•Œé¢)
```
ğŸ“„ app/(chat)/page.tsx          # ä¸»èŠå¤©é¡µé¢
ğŸ“„ app/(chat)/chat/[id]/page.tsx # èŠå¤©è¯¦æƒ…é¡µé¢
ğŸ“„ app/layout.tsx               # æ ¹å¸ƒå±€
```

## ğŸ”§ æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: Next.js 14 (App Router)
- **UIæ¡†æ¶**: React 18 + TypeScript
- **æ ·å¼**: Tailwind CSS
- **æ•°æ®åº“**: PostgreSQL + Prisma ORM
- **è®¤è¯**: NextAuth.js
- **AI**: OpenAI API
- **PDFå¤„ç†**: pdf-parse, pdf-lib
- **çŠ¶æ€ç®¡ç†**: React Hooks + SWR

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–
```bash
npm install
```

### 2. ç¯å¢ƒé…ç½®
```bash
cp .env.example .env.local
# é…ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡
```

### 3. æ•°æ®åº“è®¾ç½®
```bash
npx prisma generate
npx prisma db push
```

### 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

## ğŸ“ æ ¸å¿ƒåŠŸèƒ½è¯´æ˜

### PDFå¤„ç†æµç¨‹
1. **ä¸Šä¼ **: ç”¨æˆ·ä¸Šä¼ PDFæ–‡ä»¶
2. **å­˜å‚¨**: æ–‡ä»¶ä¿å­˜åˆ°æœåŠ¡å™¨å’Œæ•°æ®åº“
3. **æå–**: ä½¿ç”¨pdf-parseæå–æ–‡æœ¬å†…å®¹
4. **æœç´¢**: åŸºäºè¯­ä¹‰æœç´¢æŸ¥æ‰¾ç›¸å…³å†…å®¹
5. **å¯¹è¯**: AIåŸºäºPDFå†…å®¹å›ç­”é—®é¢˜

### èŠå¤©ç³»ç»Ÿæ¶æ„
1. **å‰ç«¯**: Reactç»„ä»¶å¤„ç†ç”¨æˆ·äº¤äº’
2. **API**: Next.js APIè·¯ç”±å¤„ç†è¯·æ±‚
3. **AI**: OpenAI APIç”Ÿæˆæ™ºèƒ½å›å¤
4. **æ•°æ®åº“**: Prismaç®¡ç†æ•°æ®æŒä¹…åŒ–

## ğŸ¯ å…³é”®æ–‡ä»¶è¯´æ˜

- **`split-chat.tsx`**: ä¸»èŠå¤©ç•Œé¢ï¼Œæ•´åˆPDFæŸ¥çœ‹å’Œå¯¹è¯åŠŸèƒ½
- **`enhanced/route.ts`**: æ ¸å¿ƒèŠå¤©APIï¼Œå¤„ç†AIå¯¹è¯é€»è¾‘
- **`simple-ai-pdf-viewer.tsx`**: PDFæŸ¥çœ‹å™¨ï¼Œæ”¯æŒé¡µé¢å¯¼èˆª
- **`pdf-search.ts`**: PDFæœç´¢ç®—æ³•ï¼Œæ”¯æŒè¯­ä¹‰æœç´¢
- **`prisma-queries.ts`**: æ•°æ®åº“æ“ä½œï¼Œç®¡ç†ç”¨æˆ·å’ŒèŠå¤©æ•°æ®

## ğŸ” è°ƒè¯•å»ºè®®

1. **æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—**: æ‰€æœ‰APIéƒ½æœ‰è¯¦ç»†çš„æ—¥å¿—è¾“å‡º
2. **æ£€æŸ¥æ•°æ®åº“**: ä½¿ç”¨Prisma StudioæŸ¥çœ‹æ•°æ®çŠ¶æ€
3. **æµ‹è¯•API**: ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·æµ‹è¯•APIç«¯ç‚¹
4. **PDFå¤„ç†**: æ£€æŸ¥æ–‡ä»¶è·¯å¾„å’Œæƒé™è®¾ç½®

## ğŸ“š æ‰©å±•åŠŸèƒ½

- æ”¯æŒæ›´å¤šæ–‡ä»¶æ ¼å¼
- æ·»åŠ æ–‡æ¡£æ ‡æ³¨åŠŸèƒ½
- å®ç°å¤šè¯­è¨€æ”¯æŒ
- æ·»åŠ ç”¨æˆ·æƒé™ç®¡ç†
- é›†æˆæ›´å¤šAIæ¨¡å‹

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªå­¦ä¹ é¡¹ç›®ï¼Œå±•ç¤ºäº†ç°ä»£Webåº”ç”¨çš„å…¨æ ˆå¼€å‘æŠ€æœ¯ã€‚ä»£ç ç»“æ„æ¸…æ™°ï¼Œé€‚åˆå­¦ä¹ å’Œæ‰©å±•ã€‚